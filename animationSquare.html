<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Анимация с canvas</title>
    </head>
    <body>
        <canvas id="canvas" width="200" height="200" style="border: 1px solid black;"></canvas>
        <script>
            
            // set canvas and parameters
            
            var canvas = document.getElementById("canvas");
            var ctx = canvas.getContext("2d");
            
            var blocksize = 20;
            var positionX = 0;
            var shift = canvas.getAttribute("height") - blocksize;
            var positionY = randomInt(shift);
            var color = randomColor();
            
            // set functions
            
            function randomColor () {
                let colorArr = ["#5E2E2C", "#A81B16", "#DB231D", "#F54F49", "#5C0F0C"];
                return colorArr[Math.floor(Math.random() * colorArr.length)];
            };

            function randomInt(max) {
                return Math.floor(Math.random() * max);
            }

            // set function for interval and start interval

            function redrawSquare() {
                // ctx.clearRect(0, 0, 200 ,200);
                ctx.fillStyle = color;
                ctx.fillRect(positionX, positionY, 20, 20);
    
                positionX += 3;
                if (positionX > 200) {
                    positionX = 0;
                    positionY = randomInt(shift);
                    color = randomColor();
                }
            }
            
            let intervalId = setInterval(() => redrawSquare(), 16);

        </script>
    </body>
</html>